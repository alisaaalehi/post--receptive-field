<!DOCTYPE html>
<html>
<head>
<style>
body {
  padding: 0;
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  color: rgba(0, 0, 0, 0.6);
  font-size: 13px;
}
</style>
</head>
<body>

<img style="position: absolute; right: 0;" height="27" width="27" src="https://distill.pub/2018/feature-wise-transformations/images/pointer.svg" />

<svg id="svg" height="580" width="800">

  Sorry, your browser does not support inline SVG.
</svg>

<div style="position: absolute; top: 53px; left: 0px; text-align: right;">
<div style="height: 20px;">Kernel Size (k<sub>1</sub>): <span id="value_k1">5</span></div>
<div style="height: 20px;">Left Pad (p<sub>1</sub></sub>): <span id="value_p1">2</span></div>
<div style="height: 20px;">Right Pad (q<sub>1</sub>): <span id="value_q1">1</span></div>
<div style="height: 20px;">Stride (s<sub>1</sub>): <span id="value_s1">2</span></div>
</div>
<div style="position: absolute; top: 53px; right: 0px; text-align: right;">
<div style="height: 20px;">Kernel Size (k<sub>2</sub>): <span id="value_k2">3</span></div>
<div style="height: 20px;">Left Pad (p<sub>2</sub></sub>): <span id="value_p2">0</span></div>
<div style="height: 20px;">Right Pad (q<sub>2</sub>): <span id="value_q2">0</span></div>
<div style="height: 20px;">Stride (s<sub>2</sub>): <span id="value_s2">1</span></div>
</div>
<div style="position: absolute; top: 183px; right: 0px; text-align: right;">
<div style="height: 20px;">Kernel Size (k<sub>3</sub>): <span id="value_k3">3</span></div>
<div style="height: 20px;">Left Pad (p<sub>3</sub></sub>): <span id="value_p3">0</span></div>
<div style="height: 20px;">Right Pad (q<sub>3</sub>): <span id="value_q3">0</span></div>
<div style="height: 20px;">Stride (s<sub>3</sub>): <span id="value_s3">1</span></div>
</div>
<div style="position: absolute; top: 353px; right: 100px; text-align: right;">
<div style="height: 20px;">Add</div>
</div>

<script type="text/javascript" src="utils.js"></script>
<script type="text/javascript">
var svgEl = document.getElementById("svg");
var globals = {
  "box_width": 30,
  "box_height": 30,
  "box_inner_padding": 5,
  "row_space": 100,
  "perspective_shift": 18,
  "perspective_spacing": 4,
  "stroke_width": 1
};

// Signatures for reference:
// renderRowFn(el, row, width, offset, globals)
// renderFlowFn(el, row, width1, width2, offset1, offset2, globals)

renderRowFn(svgEl, 1, 8, 6, globals);

renderFlowFn(svgEl, 1, 5, 1, 4, 4, globals);
renderFlowFn(svgEl, 1, 5, 1, 6, 5, globals);
renderFlowFn(svgEl, 1, 5, 1, 8, 6, globals);
renderFlowFn(svgEl, 1, 5, 1, 10, 7, globals);

renderFlowFn(svgEl, 1, 3, 1, 6, 9, globals);
renderFlowFn(svgEl, 1, 3, 1, 7, 10, globals);
renderFlowFn(svgEl, 1, 3, 1, 8, 11, globals);
renderFlowFn(svgEl, 1, 3, 1, 9, 12, globals);
renderFlowFn(svgEl, 1, 3, 1, 10, 13, globals);
renderFlowFn(svgEl, 1, 3, 1, 11, 14, globals);

renderRowFn(svgEl, 2, 4, 4, globals);
renderRowFn(svgEl, 2, 6, 9, globals);

renderFlowFn(svgEl, 2, 3, 1, 9, 10, globals);
renderFlowFn(svgEl, 2, 3, 1, 10, 11, globals);
renderFlowFn(svgEl, 2, 3, 1, 11, 12, globals);
renderFlowFn(svgEl, 2, 3, 1, 12, 13, globals);

renderRowFn(svgEl, 3, 4, 10, globals);

renderFlowFn(svgEl, 3, 1, 1, 10, 7, globals);
renderFlowFn(svgEl, 3, 1, 1, 11, 8, globals);
renderFlowFn(svgEl, 3, 1, 1, 12, 9, globals);
renderFlowFn(svgEl, 3, 1, 1, 13, 10, globals);
renderFlowFn(svgEl, 2, 1, 1, 4, 7, globals, 2);
renderFlowFn(svgEl, 2, 1, 1, 5, 8, globals, 2);
renderFlowFn(svgEl, 2, 1, 1, 6, 9, globals, 2);
renderFlowFn(svgEl, 2, 1, 1, 7, 10, globals, 2);

renderRowFn(svgEl, 4, 4, 7, globals);

var featureNodes = document.querySelectorAll(".feature");
for (var i=0; i < featureNodes.length; i++) {
  featureNodes[i].addEventListener("mouseenter", renderSingleFlowStack);
}

renderSingleFlowStack.call(document.querySelector("#svg > rect.feature.feature_4_8"));

</script>

</body>
</html>
